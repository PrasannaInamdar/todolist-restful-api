<!DOCTYPE html>
<html>
<head>
 <link href="https://netdna.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<link rel="stylesheet" type="text/css" href="static/main.css">
 <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
 <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script> 
</head>
<body>


<form >

<div ng-app="myApp" ng-controller="myCtrl">
 <table>
            <caption> Todo List</caption>
                <thead>
                    <tr>
                        <td>
                            <input type="text" ng-model="main" name="taskname">
                            <button type="submit" ng-click="sendinURL()" class="btn-primary">Add Task</button>

                        </td><td>
                        Search :<input type="text"> 

                        </td>
                    </tr>
                    <tr>
                        <th>Task Id</th>
                        <th>Task</th>
                    </tr>
                </thead>
                
                <tbody>
                   
                    <tr data-ng-repeat="user in tasks.tasks">
                  
                        <td> // user.uid // </td>
                         <td >  <input type="text" name="updatedText" ng-disabled="!disable" ng-bind="user.taskname" value="//user.taskname//"> 
                         <input type="image" value="//user.taskname//" class="deleteImg" ng-click=deleteIt(user.taskname) src="static/img/trash_can.png" height="15px" width="18px" name="removeId"  > 
                          <input type="image" ng-hide="okbtnstatus"  src="static/img/okbtn.png"  height="15px" width="18px" name="editId" value="//user.uid//">
                          <a href="#"> <span ng-hide="editbtn" ng-click="disable=!disable; okbtnstatus=false; cancelbtn=false; editbtn=true;" class="glyphicon glyphicon-pencil"></span></a>
                           <a href="#"><span ng-hide="cancelbtn" ng-click="editbtn=false; okbtnstatus=true; cancelbtn=true;disable=!disable;" class="glyphicon glyphicon-remove"></span></a>
                         </td>
                    </tr>
           
                </tbody>
            </table>
         


   </div>
   </form>
</body>
<script>
var app = angular.module('myApp', []);
app.controller('myCtrl', function($scope,$http){
    $scope.cancelbtn=true;
    $scope.okbtnstatus=true;
     $scope.tasks=[];
     $http.get("/items").then(function(response){
         //handle your response here
         $scope.tasks = response.data
          console.log($scope.tasks)

    });
     $scope.sendinURL = function (){
        var data =$scope.main 
        $http({
    method : "POST",
    url : "item/"+data
  }).then(function mySuccess(response) {
        alert("Done")
    }, function myError(response) {
        alert("Not Done")
  });

     }

     $scope.deleteIt = function(value){
        alert(value)
        var data = value
        $http({
            method:"DELETE",
            url:"item/"+data
        }).then(function mySuccess(response){
            alert("Deleted")
        }, function myError(response){
            alert("Error Occurred")
        });
     }

});


 app.config(function($interpolateProvider) {
            $interpolateProvider.startSymbol('//').endSymbol('//');
        });

</script>
</html>
